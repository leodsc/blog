<main>
  <section>
    <button class="btn-a" (click)="changeCurrentPanel('tema')">Temas</button>
    <button class="btn-a" (click)="changeCurrentPanel('postagens')">
      Postagens
    </button>
    <button class="btn-a" (click)="changeCurrentPanel('minhas-postagens')">
      Minhas Postagens
    </button>
  </section>
  <article *ngIf="currentPanel === 'postagens'">
    <input
      type="text"
      [(ngModel)]="termo"
      placeholder="Procurar postagem por titulo"
      (change)="procurar()"
    />
    <label for="tema">Escolha um tema para a postagem</label>
    <select
      name="tema"
      id="tema"
      [(ngModel)]="temaId"
      (change)="findById(temaId)"
      class="border-0"
      aria-label="Default select example"
    >
      <option
        *ngFor="let tema of temas"
        name="tema"
        id="tema"
        value="{{ tema.id }}"
      >
        {{ tema.nome }}
      </option>
    </select>
    <div class="input-group">
      <label for="texto"></label>
      <textarea
        [(ngModel)]="postagem.texto"
        style="height: 160px"
        class="form-control"
        placeholder="Texto da postagem"
        aria-label="With textarea"
        name="texto"
        id="texto"
      ></textarea>
    </div>
    <div class="input-group mb-3 align-items-center">
      <input
        type="text"
        class="form-control"
        aria-label="Sizing example input"
        aria-describedby="inputGroup-sizing-default"
        placeholder="Título da nova postagem"
        required
        name="titulo"
        id="titulo"
        [(ngModel)]="postagem.titulo"
      />
      <button
        class="input-group-text bg-info text-white"
        id="inputGroup-sizing-default"
        (click)="enviarPostagem()"
      >
        Enviar
      </button>
    </div>
    <div *ngIf="modalEditPostagem" class="modal-ctn">
      <h3>Editar Postagem</h3>
      <input
        type="text"
        class="form-control"
        aria-label="Sizing example input"
        aria-describedby="inputGroup-sizing-default"
        placeholder="Título da nova postagem"
        required
        [(ngModel)]="currentPostagem.titulo"
      />
      <div class="input-group mb-3 align-items-center">
        <input
          type="text"
          class="form-control"
          aria-label="Sizing example input"
          aria-describedby="inputGroup-sizing-default"
          placeholder="Corpo da nova postagem"
          required
          [(ngModel)]="currentPostagem.texto"
        />
        <button
          (click)="editarPostagem()"
          class="input-group-text bg-info text-white"
          id="inputGroup-sizing-default"
        >
          Enviar
        </button>
      </div>
    </div>
    <div *ngFor="let postagem of postagens">
      <p class="titulo">Titulo: {{ postagem.titulo }}</p>
      <p class="texto">
        {{ postagem.texto }}
        <button
          type="button"
          class="btn btn-info"
          (click)="editar(postagem, 'postagem')"
        >
          Editar
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="excluirPostagem(postagem)"
        >
          Excluir
        </button>
      </p>
      <p class="tema">Tema: {{ postagem.tema.nome }}</p>
    </div>
  </article>
  <article *ngIf="currentPanel === 'tema'">
    <h1>Criar novo tema</h1>
    <div class="mb-3">
      <label for="nome" class="form-label">Nome do tema</label>
      <input
        [(ngModel)]="tema.nome"
        type="email"
        class="form-control"
        id="nome"
        name="nome"
        placeholder="Exemplo: futebol"
      />
    </div>
    <div class="mb-3">
      <label for="descricao" class="form-label">Descrição do tema</label>
      <textarea
        [(ngModel)]="tema.descricao"
        class="form-control"
        id="descricao"
        name="descricao"
        rows="3"
      ></textarea>
      <button type="button" (click)="criarTema()" class="btn btn-success">
        Criar
      </button>
    </div>
    <div *ngIf="modalEdit" class="modal-ctn">
      <h3>Editar tema</h3>
      <input
        type="text"
        class="form-control"
        aria-label="Sizing example input"
        aria-describedby="inputGroup-sizing-default"
        placeholder="Título da nova postagem"
        required
        [(ngModel)]="currentTema.nome"
      />
      <div class="input-group mb-3 align-items-center">
        <input
          type="text"
          class="form-control"
          aria-label="Sizing example input"
          aria-describedby="inputGroup-sizing-default"
          placeholder="Título da nova postagem"
          required
          [(ngModel)]="currentTema.descricao"
        />
        <button
          (click)="enviarEdicao()"
          class="input-group-text bg-info text-white"
          id="inputGroup-sizing-default"
        >
          Enviar
        </button>
      </div>
    </div>
    <!-- <div *ngIf="modalClose" class="modal-ctn">
      <h3>{{ modal.name }}</h3>
    </div> -->
    <table class="table">
      <thead>
        <tr>
          <th scope="col">id</th>
          <th scope="col">Tema</th>
          <th scope="col">Descrição</th>
          <th scope="col">Ação</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tema of temas">
          <td>{{ tema.id }}</td>
          <td>{{ tema.nome }}</td>
          <td>{{ tema.descricao }}</td>
          <button
            type="button"
            class="btn btn-info"
            (click)="editar(tema, 'tema')"
          >
            Editar
          </button>
          <button type="button" class="btn btn-danger" (click)="excluir(tema)">
            Excluir
          </button>
        </tr>
      </tbody>
    </table>
    <!-- <div *ngFor="let tema of temas">
      <p class="tema">{{ tema }}</p>
    </div> -->
  </article>
  <article *ngIf="currentPanel === 'minhas-postagens'">
    <div *ngFor="let postagem of postagens">
      <p class="titulo">Titulo: {{ postagem.titulo }}</p>
      <p class="texto">
        {{ postagem.texto }}
        <button
          type="button"
          class="btn btn-info"
          (click)="editar(postagem, 'postagem')"
        >
          Editar
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="excluirPostagem(postagem)"
        >
          Excluir
        </button>
      </p>
      <p class="tema">Tema: {{ postagem.tema.nome }}</p>
    </div>
  </article>
</main>
